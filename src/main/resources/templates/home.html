<!DOCTYPE html>
<html lang="ko">
<head th:replace="~{layout/fragments :: common-meta}">
    <title>프로젝트 관리</title>
</head>
<body>
<div class="header">
    <div class="container">
        <h1><i class="fas fa-project-diagram"></i> API 명세서 생성기</h1>
        <div class="breadcrumb">프로젝트 관리</div>
    </div>
</div>

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>프로젝트 목록</h2>
        <button class="btn btn-primary" id="new-project">
            <i class="fas fa-plus"></i> 새 프로젝트
        </button>
    </div>

    <div class="card">
        <div class="card-body" id="projectList">
<!--            프로젝트가 있는 경우 -->
            <div th:if="${PROJECTS != null and !PROJECTS.isEmpty()}">
                <div th:each="project : ${PROJECTS}" class="project-card">

                    <div class="d-flex justify-content-between">
                        <div>
                            <div class="project-title" th:text="${project.title}">프로젝트 제목</div>
                            <div class="project-version" th:text="'v' + ${project.version}"></div>
                        </div>
                        <div class="project-actions mb-4">
                            <button class="btn btn-sm btn-primary" id="new-artifact" th:data-project-idx="${project.idx}">
                                <i class="fas fa-plus"></i> 산출물 추가
                            </button>
                            <button class="btn btn-sm btn-danger" id="delete-project" th:data-project-idx="${project.idx}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>

                    <div th:if="${project.artifacts != null and !project.artifacts.isEmpty()}" class="artifact-list">
                        <div th:each="artifact : ${project.artifacts}" th:class="'artifact-item artifact-' + ${#strings.toLowerCase(artifact.subType)}">
                            <i class="fas fa-file-code"></i>
                            <span th:text="${artifact.title}"></span>
                            <button class="btn btn-xs btn-danger" id="delete-artifact" >
                                <i class="fas fa-times" style="font-size: 10px;"></i>
                            </button>
                        </div>

                    </div>
                </div>
            </div>



            <!--            프로젝트가 없는 경우-->
            <div th:if="${PROJECTS == null or PROJECTS.isEmpty()}" class="empty-state">
                <i class="fas fa-folder-open"></i>
                <p>아직 생성된 프로젝트가 없습니다.</p>
                <button class="btn btn-primary mt-3" onclick="showNewProjectModal()">
                    <i class="fas fa-plus"></i> 첫 번째 프로젝트 만들기
                </button>
            </div>
        </div>
    </div>
</div>

<!-- 기본 모달 -->
<th:block th:replace="~{layout/fragments :: common-modal}"></th:block>
<!-- 필수 JS -->
<th:block th:replace="~{layout/fragments :: essential-js}"></th:block>
<script th:src="@{/js/pages/home.js}"></script>
</body>
</html>