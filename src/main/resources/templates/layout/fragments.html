<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:fragment="common-meta">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/validator.css}">
    <link rel="stylesheet" th:href="@{/css/nprogress.css}">
    <link rel="stylesheet" th:href="@{/css/toastify.min.css}">
    <title>프로젝트 관리</title>
</head>

<!-- CSS 라이브러리 -->
<th:block th:fragment="common-css">
    <link rel="stylesheet" th:href="@{/css/common.css}">
</th:block>

<!-- JS -->
<th:block th:fragment="essential-js">
    <script th:src="@{/js/core/jquery-3.7.1.min.js}"></script>
    <script th:src="@{/js/core/validator.min.js}"></script>
    <script th:src="@{/js/core/axios.min.js}"></script>
    <script th:src="@{/js/core/nprogress.js}"></script>
    <script th:src="@{/js/core/sweetalert2.js}"></script>
    <script th:src="@{/js/core/toastify.js}"></script>
    <script th:src="@{/js/core/common.js}"></script>
    <script th:src="@{/js/core/httpClient.js}"></script>
    <script th:src="@{/js/util/index.js}"></script>
</th:block>

<!-- 공통 헤더 레이아웃 -->
<div th:fragment="common-header(title, breadcrumbs)">
    <div class="header">
        <div class="container header__inner">
            <div class="header__info">
                <h1><i class="fas fa-project-diagram"></i>
                    <span th:text="${title ?: 'API 명세서 생성기'}">API 명세서 생성기</span>
                </h1>
                <div class="breadcrumb" th:if="${breadcrumbs}">
                    <span class="breadcrumb__text" th:text="${breadcrumbs}">경로</span>
                </div>
            </div>

            <div th:replace="~{layout/fragments :: common-user}"></div>
        </div>
    </div>
</div>

<div th:fragment="common-user" th:with="resolvedUserId=${#authentication?.principal?.user?.nickname ?: #authentication?.name}">
    <div class="header__user">
        <div class="user-menu" th:if="${resolvedUserId}">
            <details class="user-menu__details">
                <summary class="user-menu__summary">
                    <i class="fas fa-user-circle user-menu__avatar" aria-hidden="true"></i>
                    <span class="user-menu__id" th:text="${resolvedUserId}">USER</span>
                    <i class="fas fa-chevron-down user-menu__chevron" aria-hidden="true"></i>
                </summary>
                <nav class="user-menu__dropdown" aria-label="사용자 메뉴">
                    <a class="user-menu__link" th:href="@{/user/profile}">수정하기</a>
                    <a class="user-menu__link user-menu__link--logout" th:href="@{/logout}">로그아웃</a>
                </nav>
            </details>
        </div>
        <div class="user-menu user-menu--guest" th:unless="${resolvedUserId}">
            <a class="user-menu__link" th:href="@{/login}">로그인</a>
        </div>
    </div>
</div>

<!-- 공통 푸터 -->
<div th:fragment="common-footer">
    <footer class="footer mt-5">
        <div class="container">
            <div class="text-center text-muted">
                <p>&copy; 2024 API 명세서 생성기. All rights reserved.</p>
            </div>
        </div>
    </footer>
</div>


<!-- 로딩 스피너 -->
<div th:fragment="loading-spinner" id="globalLoading" style="display: none;">
    <div class="loading-overlay">
        <div class="loading"></div>
        <span>처리 중...</span>
    </div>
</div>

<!-- 공통 모달 -->
<div th:fragment="common-modal" id="common-modal" class="modal" style="display: none;">
</div>
